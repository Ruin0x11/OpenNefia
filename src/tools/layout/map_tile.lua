local map_tile = {
   { atlas = 0, id = 0,   name = "world_grass" },
   { atlas = 0, id = 1,   name = "world_small_trees_1" },
   { atlas = 0, id = 2,   name = "world_small_trees_2" },
   { atlas = 0, id = 3,   name = "world_small_trees_3" },
   { atlas = 0, id = 4,   name = "world_trees_1" },
   { atlas = 0, id = 5,   name = "world_trees_2" },
   { atlas = 0, id = 6,   name = "world_trees_3" },
   { atlas = 0, id = 7,   name = "world_trees_4" },
   { atlas = 0, id = 8,   name = "world_trees_5" },
   { atlas = 0, id = 9,   name = "world_trees_6" },
   { atlas = 0, id = 10,  name = "world_plants_1" },
   { atlas = 0, id = 11,  name = "world_plants_2" },
   { atlas = 0, id = 12,  name = "world_plants_3" },
   { atlas = 0, id = 13,  name = "world_dirt_1" },
   { atlas = 0, id = 14,  name = "world_dirt_2" },
   { atlas = 0, id = 15,  name = "world_dirt_3" },
   { atlas = 0, id = 16,  name = "world_dirt_4" },
   { atlas = 0, id = 26,  name = "world_snow_cross" },
   { atlas = 0, id = 27,  name = "world_snow" },
   { atlas = 0, id = 29,  name = "world_snow_trees_1" },
   { atlas = 0, id = 30,  name = "world_snow_trees_2" },
   { atlas = 0, id = 31,  name = "world_snow_crater" },
   { atlas = 0, id = 32,  name = "world_snow_mounds" },
   { atlas = 0, id = 34,  name = "world_road_ns" },
   { atlas = 0, id = 35,  name = "world_road_we" },
   { atlas = 0, id = 36,  name = "world_road_sw" },
   { atlas = 0, id = 37,  name = "world_road_se" },
   { atlas = 0, id = 38,  name = "world_road_nw" },
   { atlas = 0, id = 39,  name = "world_road_ne" },
   { atlas = 0, id = 40,  name = "world_road_swe" },
   { atlas = 0, id = 41,  name = "world_road_nsw" },
   { atlas = 0, id = 42,  name = "world_road_nwe" },
   { atlas = 0, id = 43,  name = "world_road_nse" },
   { atlas = 0, id = 66,  name = "world_flower_1" },
   { atlas = 0, id = 67,  name = "world_flower_2" },
   { atlas = 0, id = 68,  name = "world_flower_3" },
   { atlas = 0, id = 69,  name = "world_flower_4" },
   { atlas = 0, id = 70,  name = "world_flower_5" },
   { atlas = 0, id = 71,  name = "world_flower_6" },
   { atlas = 0, id = 72,  name = "world_flower_7" },
   { atlas = 0, id = 73,  name = "world_mounds_1" },
   { atlas = 0, id = 74,  name = "world_mounds_2" },
   { atlas = 0, id = 77,  name = "world_bridge_left" },
   { atlas = 0, id = 78,  name = "world_bridge_middle" },
   { atlas = 0, id = 79,  name = "world_bridge_right" },
   { atlas = 0, id = 99,  name = "world_desert" },
   { atlas = 0, id = 100, name = "world_desert_trees_1" },
   { atlas = 0, id = 101, name = "world_desert_trees_2" },
   { atlas = 0, id = 102, name = "world_desert_trees_3" },
   { atlas = 0, id = 103, name = "world_desert_trees_4" },
   { atlas = 0, id = 104, name = "world_desert_dead_trees_1" },
   { atlas = 0, id = 105, name = "world_desert_dead_trees_2" },
   { atlas = 0, id = 106, name = "world_desert_dead_trees_3" },
   { atlas = 0, id = 107, name = "world_desert_border_w" },
   { atlas = 0, id = 110, name = "world_desert_border_s" },
   { atlas = 0, id = 114, name = "world_desert_border_sw" },
   { atlas = 0, id = 115, name = "world_desert_border_corner_ne" },
   { atlas = 0, id = 119, name = "world_desert_bones" },
   { atlas = 0, id = 120, name = "world_desert_rocks_1" },
   { atlas = 0, id = 121, name = "world_desert_rocks_2" },
   { atlas = 0, id = 123, name = "world_desert_rocks_4" },
   { atlas = 0, id = 124, name = "world_desert_plants_1" },
   { atlas = 0, id = 126, name = "world_desert_plants_3" },
   { atlas = 0, id = 166, name = "world_dirt_crater" },
   { atlas = 0, id = 167, name = "world_dirt_rocks_1" },
   { atlas = 0, id = 168, name = "world_dirt_rocks_2" },
   { atlas = 0, id = 170, name = "world_dirt_dead_trees_1" },
   { atlas = 0, id = 171, name = "world_dirt_dead_trees_2" },
   { atlas = 0, id = 172, name = "world_dirt_dead_trees_3" },
   { atlas = 0, id = 173, name = "world_dirt_border_w" },
   { atlas = 0, id = 174, name = "world_dirt_border_e" },
   { atlas = 0, id = 175, name = "world_dirt_border_n" },
   { atlas = 0, id = 176, name = "world_dirt_border_s" },
   { atlas = 0, id = 178, name = "world_dirt_border_corner_nw" },
   { atlas = 0, id = 179, name = "world_dirt_border_corner_se" },
   { atlas = 0, id = 180, name = "world_dirt_border_corner_sw" },
   { atlas = 0, id = 181, name = "world_dirt_border_ne" },
   { atlas = 0, id = 182, name = "world_dirt_border_nw" },
   { atlas = 0, id = 183, name = "world_dirt_border_se" },
   { atlas = 0, id = 184, name = "world_dirt_border_sw" },
   { atlas = 0, id = 199, name = "world_snow_dead_tree" },
   { atlas = 0, id = 200, name = "world_snow_trees_3" },
   { atlas = 0, id = 201, name = "world_snow_trees_4" },
   { atlas = 0, id = 202, name = "world_snow_trees_5" },
   { atlas = 0, id = 206, name = "world_snow_border_w" },
   { atlas = 0, id = 207, name = "world_snow_border_e" },
   { atlas = 0, id = 208, name = "world_snow_border_n" },
   { atlas = 0, id = 209, name = "world_snow_border_s" },
   { atlas = 0, id = 210, name = "world_snow_border_corner_ne" },
   { atlas = 0, id = 211, name = "world_snow_border_corner_nw" },
   { atlas = 0, id = 212, name = "world_snow_border_corner_se" },
   { atlas = 0, id = 213, name = "world_snow_border_corner_sw" },
   { atlas = 0, id = 214, name = "world_snow_border_ne" },
   { atlas = 0, id = 215, name = "world_snow_border_nw" },
   { atlas = 0, id = 216, name = "world_snow_border_se" },
   { atlas = 0, id = 217, name = "world_snow_border_sw" },
   { atlas = 0, id = 264, name = "world_water" },
   { atlas = 0, id = 265, name = "world_water_rocks" },
   { atlas = 0, id = 266, name = "world_water_2" },
   { atlas = 0, id = 267, name = "world_water_pole" },
   { atlas = 0, id = 268, name = "world_water_iceberg" },
   { atlas = 0, id = 269, name = "world_water_rock" },
   { atlas = 0, id = 270, name = "world_water_shadow" },
   { atlas = 0, id = 285, name = "world_grass_water_border_w" },
   { atlas = 0, id = 286, name = "world_grass_water_border_e" },
   { atlas = 0, id = 287, name = "world_grass_water_border_n" },
   { atlas = 0, id = 288, name = "world_grass_water_border_s" },
   { atlas = 0, id = 289, name = "world_grass_water_border_corner_ne" },
   { atlas = 0, id = 290, name = "world_grass_water_border_corner_nw" },
   { atlas = 0, id = 291, name = "world_grass_water_border_corner_se" },
   { atlas = 0, id = 292, name = "world_grass_water_border_corner_sw" },
   { atlas = 0, id = 293, name = "world_grass_water_border_ne" },
   { atlas = 0, id = 294, name = "world_grass_water_border_nw" },
   { atlas = 0, id = 295, name = "world_grass_water_border_se" },
   { atlas = 0, id = 296, name = "world_grass_water_border_sw" },
   { atlas = 0, id = 297, name = "world_snow_water_border_w" },
   { atlas = 0, id = 298, name = "world_snow_water_border_e" },
   { atlas = 0, id = 299, name = "world_snow_water_border_n" },
   { atlas = 0, id = 300, name = "world_snow_water_border_s" },
   { atlas = 0, id = 301, name = "world_snow_water_border_corner_ne" },
   { atlas = 0, id = 302, name = "world_snow_water_border_corner_nw" },
   { atlas = 0, id = 303, name = "world_snow_water_border_corner_se" },
   { atlas = 0, id = 304, name = "world_snow_water_border_corner_sw" },
   { atlas = 0, id = 305, name = "world_snow_water_border_ne" },
   { atlas = 0, id = 306, name = "world_snow_water_border_nw" },
   { atlas = 0, id = 307, name = "world_snow_water_border_se" },
   { atlas = 0, id = 308, name = "world_snow_water_border_sw" },
   { atlas = 0, id = 309, name = "world_desert_water_border_w" },
   { atlas = 0, id = 310, name = "world_desert_water_border_e" },
   { atlas = 0, id = 311, name = "world_desert_water_border_n" },
   { atlas = 0, id = 312, name = "world_desert_water_border_s" },
   { atlas = 0, id = 313, name = "world_desert_water_border_corner_ne" },
   { atlas = 0, id = 314, name = "world_desert_water_border_corner_nw" },
   { atlas = 0, id = 315, name = "world_desert_water_border_corner_se" },
   { atlas = 0, id = 316, name = "world_desert_water_border_corner_sw" },
   { atlas = 0, id = 317, name = "world_desert_water_border_ne" },
   { atlas = 0, id = 318, name = "world_desert_water_border_nw" },
   { atlas = 0, id = 319, name = "world_desert_water_border_se" },
   { atlas = 0, id = 320, name = "world_desert_water_border_sw" },
   { atlas = 0, id = 462, name = "world_cliff_nw" },
   { atlas = 0, id = 463, name = "world_cliff_n" },
   { atlas = 0, id = 464, name = "world_cliff_ne" },
   { atlas = 0, id = 495, name = "world_cliff_w" },
   { atlas = 0, id = 497, name = "world_cliff_e" },
   { atlas = 0, id = 498, name = "world_cliff_inner_sw" },
   { atlas = 0, id = 500, name = "world_cliff_inner_se" },
   { atlas = 0, id = 528, name = "world_blank" },
   { atlas = 0, id = 529, name = "world_cliff_sw" },
   { atlas = 0, id = 530, name = "world_cliff_s" },
   { atlas = 0, id = 531, name = "world_cliff_se" },
   { atlas = 0, id = 533, name = "world_cliff_top_5" },
   { atlas = 0, id = 561, name = "world_grass_mountain_1" },
   { atlas = 0, id = 562, name = "world_grass_mountain_2" },
   { atlas = 0, id = 564, name = "world_grass_mountain_3" },
   { atlas = 0, id = 565, name = "world_grass_mountain_4" },
   { atlas = 0, id = 566, name = "world_grass_mountain_5" },
   { atlas = 0, id = 567, name = "world_grass_mountain_6" },
   { atlas = 0, id = 568, name = "world_snow_mountain_1" },
   { atlas = 0, id = 569, name = "world_snow_mountain_2" },
   { atlas = 0, id = 570, name = "world_snow_mountain_3" },
   { atlas = 0, id = 594, name = "world_desert_mountain_1" },
   { atlas = 0, id = 595, name = "world_desert_mountain_2" },
   { atlas = 0, id = 596, name = "world_desert_mountain_3" },
   { atlas = 0, id = 597, name = "world_desert_mountain_4" },
   { atlas = 0, id = 598, name = "world_desert_mountain_5" },
   { atlas = 0, id = 599, name = "world_dirt_mountain_1" },
   { atlas = 0, id = 600, name = "world_dirt_mountain_2" },
   { atlas = 0, id = 604, name = "world_oasis_c" },
   { atlas = 0, id = 605, name = "world_oasis_e" },
   { atlas = 0, id = 606, name = "world_oasis_w" },
   { atlas = 0, id = 607, name = "world_oasis_s" },
   { atlas = 0, id = 608, name = "world_oasis_n" },
   { atlas = 0, id = 609, name = "world_oasis_corner_sw" },
   { atlas = 0, id = 610, name = "world_oasis_corner_se" },
   { atlas = 0, id = 611, name = "world_oasis_corner_ne" },
   { atlas = 0, id = 612, name = "world_oasis_corner_nw" },
   { atlas = 0, id = 613, name = "world_oasis_ne" },
   { atlas = 0, id = 614, name = "world_oasis_nw" },
   { atlas = 0, id = 615, name = "world_oasis_se" },
   { atlas = 0, id = 616, name = "world_oasis_sw" },
   { atlas = 1, id = 0,   name = "grass" },
   { atlas = 1, id = 1,   name = "grass_violets" },
   { atlas = 1, id = 2,   name = "grass_rocks" },
   { atlas = 1, id = 3,   name = "grass_tall_1" },
   { atlas = 1, id = 4,   name = "grass_tall_2" },
   { atlas = 1, id = 5,   name = "grass_patch_1" },
   { atlas = 1, id = 6,   name = "grass_patch_2" },
   { atlas = 1, id = 7,   name = "grass_bush_1" },
   { atlas = 1, id = 8,   name = "grass_bush_2" },
   { atlas = 1, id = 9,   name = "grass_bush_3" },
   { atlas = 1, id = 10,  name = "grass_patch_3" },
   { atlas = 1, id = 11,  name = "grass_rocks_2" },
   { atlas = 1, id = 16,  name = "desert_rocks_1" },
   { atlas = 1, id = 17,  name = "desert_rocks_2" },
   { atlas = 1, id = 18,  name = "desert_rocks_3" },
   { atlas = 1, id = 19,  name = "desert" },
   { atlas = 1, id = 20,  name = "desert_flowers_1" },
   { atlas = 1, id = 21,  name = "desert_flowers_2" },
   { atlas = 1, id = 29,  name = "grass_rock" },
   { atlas = 1, id = 30,  name = "field_1" },
   { atlas = 1, id = 31,  name = "field_2" },
   { atlas = 1, id = 33,  name = "dark_dirt_1" },
   { atlas = 1, id = 34,  name = "dark_dirt_2" },
   { atlas = 1, id = 35,  name = "dark_dirt_3" },
   { atlas = 1, id = 37,  name = "destroyed" },
   { atlas = 1, id = 38,  name = "dirt_patch" },
   { atlas = 1, id = 39,  name = "dirt_grass" },
   { atlas = 1, id = 40,  name = "dirt_rocks" },
   { atlas = 1, id = 41,  name = "dirt" },
   { atlas = 1, id = 45,  name = "snow" },
   { atlas = 1, id = 46,  name = "snow_mound" },
   { atlas = 1, id = 47,  name = "snow_plants" },
   { atlas = 1, id = 48,  name = "snow_rock" },
   { atlas = 1, id = 49,  name = "snow_stump" },
   { atlas = 1, id = 50,  name = "snow_flowers_1" },
   { atlas = 1, id = 51,  name = "snow_flowers_2" },
   { atlas = 1, id = 52,  name = "snow_flowers_3" },
   { atlas = 1, id = 53,  name = "snow_field_1" },
   { atlas = 1, id = 54,  name = "snow_field_2" },
   { atlas = 1, id = 55,  name = "snow_ice" },
   { atlas = 1, id = 56,  name = "snow_clumps_1" },
   { atlas = 1, id = 57,  name = "snow_clumps_2" },
   { atlas = 1, id = 58,  name = "snow_stalks" },
   { atlas = 1, id = 59,  name = "snow_grass" },
   { atlas = 1, id = 60,  name = "snow_blue_tile" },
   { atlas = 1, id = 61,  name = "snow_cobble_1" },
   { atlas = 1, id = 62,  name = "snow_cobble_2" },
   { atlas = 1, id = 63,  name = "snow_cobble_3" },
   { atlas = 1, id = 64,  name = "snow_cobble_4" },
   { atlas = 1, id = 65,  name = "snow_stairs" },
   { atlas = 1, id = 66,  name = "tower_of_fire_tile_1" },
   { atlas = 1, id = 70,  name = "hardwood_floor_1" },
   { atlas = 1, id = 71,  name = "hardwood_floor_2" },
   { atlas = 1, id = 72,  name = "hardwood_floor_3" },
   { atlas = 1, id = 73,  name = "hardwood_floor_4" },
   { atlas = 1, id = 74,  name = "hardwood_floor_5" },
   { atlas = 1, id = 75,  name = "hardwood_floor_6" },
   { atlas = 1, id = 76,  name = "metal_plating_rusted" },
   { atlas = 1, id = 77,  name = "thatching" },
   { atlas = 1, id = 78,  name = "cobble" },
   { atlas = 1, id = 81,  name = "cobble_2" },
   { atlas = 1, id = 82,  name = "snow_flowers_4" },
   { atlas = 1, id = 83,  name = "snow_flowers_5" },
   { atlas = 1, id = 84,  name = "snow_flowers_6" },
   { atlas = 1, id = 85,  name = "snow_bushes_1" },
   { atlas = 1, id = 86,  name = "snow_bushes_2" },
   { atlas = 1, id = 87,  name = "snow_bushes_3" },
   { atlas = 1, id = 88,  name = "snow_bush" },
   { atlas = 1, id = 89,  name = "snow_boulder" },
   { atlas = 1, id = 98,  name = "snow_pillar" },
   { atlas = 1, id = 99,  name = "cobble_3" },
   { atlas = 1, id = 100, name = "concrete_2" },
   { atlas = 1, id = 101, name = "flooring_1" },
   { atlas = 1, id = 102, name = "flooring_2" },
   { atlas = 1, id = 103, name = "cobble_4" },
   { atlas = 1, id = 105, name = "cobble_6" },
   { atlas = 1, id = 109, name = "cobble_9" },
   { atlas = 1, id = 110, name = "cobble_10" },
   { atlas = 1, id = 111, name = "cobble_11" },
   { atlas = 1, id = 112, name = "cobble_12" },
   { atlas = 1, id = 113, name = "cobble_diagonal" },
   { atlas = 1, id = 114, name = "cobble_diagonal_round" },
   { atlas = 1, id = 115, name = "cobble_diagonal_raised" },
   { atlas = 1, id = 118, name = "hardwood_floor_7" },
   { atlas = 1, id = 119, name = "cobble_dark_1" },
   { atlas = 1, id = 120, name = "cobble_dark_2" },
   { atlas = 1, id = 121, name = "cobble_dark_3" },
   { atlas = 1, id = 122, name = "cobble_dark_4" },
   { atlas = 1, id = 123, name = "rough_1" },
   { atlas = 1, id = 126, name = "rough_4" },
   { atlas = 1, id = 128, name = "rough_6" },
   { atlas = 1, id = 129, name = "rough_7" },
   { atlas = 1, id = 130, name = "rough_8" },
   { atlas = 1, id = 131, name = "rough_9" },
   { atlas = 1, id = 132, name = "tile_1" },
   { atlas = 1, id = 133, name = "tile_2" },
   { atlas = 1, id = 134, name = "tile_3" },
   { atlas = 1, id = 135, name = "brick_1" },
   { atlas = 1, id = 136, name = "brick_2" },
   { atlas = 1, id = 137, name = "cobble_caution" },
   { atlas = 1, id = 138, name = "concrete_4" },
   { atlas = 1, id = 139, name = "concrete_tiled" },
   { atlas = 1, id = 140, name = "shop_platform" },
   { atlas = 1, id = 141, name = "metal_dark" },
   { atlas = 1, id = 144, name = "cobble_wall_roof" },
   { atlas = 1, id = 146, name = "carpet_1" },
   { atlas = 1, id = 147, name = "hardwood_bordered" },
   { atlas = 1, id = 148, name = "tatami_1" },
   { atlas = 1, id = 149, name = "tatami_2" },
   { atlas = 1, id = 150, name = "cyber_1" },
   { atlas = 1, id = 151, name = "cyber_2" },
   { atlas = 1, id = 152, name = "cyber_3" },
   { atlas = 1, id = 153, name = "cyber_4" },
   { atlas = 1, id = 156, name = "carpet_nw" },
   { atlas = 1, id = 157, name = "carpet_n" },
   { atlas = 1, id = 158, name = "carpet_ne" },
   { atlas = 1, id = 159, name = "carpet_sw" },
   { atlas = 1, id = 160, name = "carpet_s" },
   { atlas = 1, id = 161, name = "carpet_se" },
   { atlas = 1, id = 163, name = "rough_11" },
   { atlas = 1, id = 164, name = "rough_12" },
   { atlas = 1, id = 165, name = "anime_water_shallow" },
   { atlas = 1, id = 168, name = "anime_water_sea", count_x = 3 },
   { atlas = 1, id = 171, name = "anime_water_hot_spring", count_x = 3 },
   { atlas = 1, id = 177, name = "cobble_wall_top" },
   { atlas = 1, id = 179, name = "ice_tiled_1" },
   { atlas = 1, id = 180, name = "ice_tiled_2" },
   { atlas = 1, id = 183, name = "ice_tiled_4" },
   { atlas = 1, id = 186, name = "ice_stairs_2" },
   { atlas = 1, id = 188, name = "bridge_we" },
   { atlas = 1, id = 189, name = "red_stairs" },
   { atlas = 1, id = 190, name = "cobble_stairs" },
   { atlas = 1, id = 192, name = "bridge_ns" },
   { atlas = 1, id = 193, name = "cobble_raised_2" },
   { atlas = 1, id = 196, name = "cobble_raised_3" },
   { atlas = 1, id = 198, name = "church_floor" },
   { atlas = 1, id = 199, name = "church_symbol" },
   { atlas = 1, id = 201, name = "carpet_red" },
   { atlas = 1, id = 202, name = "tiled" },
   { atlas = 1, id = 203, name = "carpet_green" },
   { atlas = 1, id = 204, name = "carpet_blue" },
   { atlas = 1, id = 205, name = "wood_floor_1" },
   { atlas = 1, id = 206, name = "wood_floor_2" },
   { atlas = 1, id = 208, name = "wood_floor_4" },
   { atlas = 1, id = 209, name = "wood_stair" },
   { atlas = 1, id = 210, name = "cobble_wall_bottom" },
   { atlas = 1, id = 211, name = "marble" },
   { atlas = 1, id = 212, name = "tiled_2" },
   { atlas = 1, id = 213, name = "grey_floor" },
   { atlas = 1, id = 214, name = "stair" },
   { atlas = 1, id = 216, name = "cobble_stairs_2" },
   { atlas = 1, id = 218, name = "wood_floor_5" },
   { atlas = 1, id = 219, name = "wood_floor_6" },
   { atlas = 1, id = 221, name = "wood_floor_8" },
   { atlas = 1, id = 222, name = "red_floor" },
   { atlas = 1, id = 223, name = "black_floor" },
   { atlas = 1, id = 224, name = "wood_floor_9" },
   { atlas = 1, id = 225, name = "carpet_2" },
   { atlas = 1, id = 228, name = "carpet_4" },
   { atlas = 1, id = 229, name = "carpet_5" },
   { atlas = 1, id = 230, name = "green_floor" },
   { atlas = 1, id = 330, name = "light_grass_1" },
   { atlas = 1, id = 331, name = "light_grass_2" },
   { atlas = 1, id = 332, name = "light_grass_3" },
   { atlas = 1, id = 333, name = "light_grass_bush_1" },
   { atlas = 1, id = 334, name = "light_grass_bush_2" },
   { atlas = 1, id = 335, name = "light_grass_plants" },
   { atlas = 1, id = 336, name = "light_grass_patch" },
   { atlas = 1, id = 337, name = "light_grass_shrubs" },
   { atlas = 1, id = 338, name = "light_grass_bushes" },
   { atlas = 1, id = 339, name = "light_grass_cliff_sw" },
   { atlas = 1, id = 340, name = "light_grass_cliff_s" },
   { atlas = 1, id = 341, name = "light_grass_cliff_se" },
   { atlas = 1, id = 342, name = "light_grass_flowers" },
   { atlas = 1, id = 343, name = "light_grass_dirt" },
   { atlas = 1, id = 346, name = "light_grass_cobble_1" },
   { atlas = 1, id = 347, name = "light_grass_cobble_2" },
   { atlas = 1, id = 348, name = "light_grass_cobble_3" },
   { atlas = 1, id = 349, name = "light_grass_cobble_4" },
   { atlas = 1, id = 359, name = "light_grass_wheel" },
   { atlas = 1, id = 360, name = "light_grass_railroad_tracks_ns" },
   { atlas = 1, id = 361, name = "light_grass_railroad_tracks_we" },
   { atlas = 1, id = 362, name = "light_grass_boulder" },
   { atlas = 1, id = 396, name = "wall_oriental_top" },
   { atlas = 1, id = 397, name = "wall_brick_top" },
   { atlas = 1, id = 398, name = "wall_regal_top" },
   { atlas = 1, id = 399, name = "wall_pillar_top" },
   { atlas = 1, id = 400, name = "wall_log_top" },
   { atlas = 1, id = 401, name = "wall_wood_top" },
   { atlas = 1, id = 402, name = "wall_plank_top" },
   { atlas = 1, id = 403, name = "wall_shingle_top" },
   { atlas = 1, id = 404, name = "wall_smooth_top" },
   { atlas = 1, id = 405, name = "wall_curtain_top" },
   { atlas = 1, id = 406, name = "wall_moss_top" },
   { atlas = 1, id = 407, name = "wall_crypt_top" },
   { atlas = 1, id = 408, name = "wall_ice_1_top" },
   { atlas = 1, id = 409, name = "wall_ice_2_top" },
   { atlas = 1, id = 410, name = "wall_ice_3_top" },
   { atlas = 1, id = 411, name = "wall_snow_1_top" },
   { atlas = 1, id = 412, name = "wall_snow_2_top" },
   { atlas = 1, id = 413, name = "wall_snow_3_top" },
   { atlas = 1, id = 429, name = "wall_oriental_bottom" },
   { atlas = 1, id = 430, name = "wall_brick_bottom" },
   { atlas = 1, id = 431, name = "wall_regal_bottom" },
   { atlas = 1, id = 432, name = "wall_pillar_bottom" },
   { atlas = 1, id = 433, name = "wall_log_bottom" },
   { atlas = 1, id = 434, name = "wall_wood_bottom" },
   { atlas = 1, id = 435, name = "wall_plank_bottom" },
   { atlas = 1, id = 436, name = "wall_shingle_bottom" },
   { atlas = 1, id = 437, name = "wall_smooth_bottom" },
   { atlas = 1, id = 438, name = "wall_curtain_bottom" },
   { atlas = 1, id = 439, name = "wall_moss_bottom" },
   { atlas = 1, id = 440, name = "wall_crypt_bottom" },
   { atlas = 1, id = 441, name = "wall_ice_1_bottom" },
   { atlas = 1, id = 442, name = "wall_ice_2_bottom" },
   { atlas = 1, id = 443, name = "wall_ice_3_bottom" },
   { atlas = 1, id = 444, name = "wall_snow_1_bottom" },
   { atlas = 1, id = 445, name = "wall_snow_2_bottom" },
   { atlas = 1, id = 446, name = "wall_snow_3_bottom" },
   { atlas = 1, id = 462, name = "wall_stone_1_top" },
   { atlas = 1, id = 463, name = "wall_stone_2_top" },
   { atlas = 1, id = 464, name = "wall_stone_3_top" },
   { atlas = 1, id = 465, name = "wall_stone_4_top" },
   { atlas = 1, id = 466, name = "wall_stone_5_top" },
   { atlas = 1, id = 467, name = "wall_wooden_top" },
   { atlas = 1, id = 468, name = "wall_dirt_top" },
   { atlas = 1, id = 469, name = "wall_dirt_dark_top" },
   { atlas = 1, id = 470, name = "wall_pyramid_top" },
   { atlas = 1, id = 471, name = "wall_shingled_top" },
   { atlas = 1, id = 472, name = "wall_concrete_top" },
   { atlas = 1, id = 473, name = "wall_concrete_light_top" },
   { atlas = 1, id = 474, name = "wall_tower_of_fire_top" },
   { atlas = 1, id = 475, name = "wall_forest_top" },
   { atlas = 1, id = 476, name = "wall_stone_6_top" },
   { atlas = 1, id = 477, name = "wall_stone_7_top" },
   { atlas = 1, id = 478, name = "wall_stone_8_top" },
   { atlas = 1, id = 479, name = "wall_stone_9_top" },
   { atlas = 1, id = 480, name = "wall_stone_10_top" },
   { atlas = 1, id = 481, name = "wall_hay_top" },
   { atlas = 1, id = 482, name = "wall_decor_top" },
   { atlas = 1, id = 483, name = "wall_palace_1_top" },
   { atlas = 1, id = 484, name = "wall_palace_2_top" },
   { atlas = 1, id = 485, name = "wall_palace_3_top" },
   { atlas = 1, id = 486, name = "wall_stone_11_top" },
   { atlas = 1, id = 487, name = "wall_cyber_top" },
   { atlas = 1, id = 488, name = "wall_stone_12_top" },
   { atlas = 1, id = 489, name = "wall_white_top" },
   { atlas = 1, id = 490, name = "wall_decor_2_top" },
   { atlas = 1, id = 491, name = "wall_concrete_2_top" },
   { atlas = 1, id = 492, name = "wall_concrete_3_top" },
   { atlas = 1, id = 493, name = "wall_concrete_dark_1_top" },
   { atlas = 1, id = 494, name = "wall_concrete_dark_2_top" },
   { atlas = 1, id = 495, name = "wall_stone_1_bottom" },
   { atlas = 1, id = 496, name = "wall_stone_2_bottom" },
   { atlas = 1, id = 497, name = "wall_stone_3_bottom" },
   { atlas = 1, id = 498, name = "wall_stone_4_bottom" },
   { atlas = 1, id = 499, name = "wall_stone_5_bottom" },
   { atlas = 1, id = 500, name = "wall_wooden_bottom" },
   { atlas = 1, id = 501, name = "wall_dirt_bottom" },
   { atlas = 1, id = 502, name = "wall_dirt_dark_bottom" },
   { atlas = 1, id = 503, name = "wall_pyramid_bottom" },
   { atlas = 1, id = 504, name = "wall_shingled_bottom" },
   { atlas = 1, id = 505, name = "wall_concrete_bottom" },
   { atlas = 1, id = 506, name = "wall_concrete_light_bottom" },
   { atlas = 1, id = 507, name = "wall_tower_of_fire_bottom" },
   { atlas = 1, id = 508, name = "wall_forest_bottom" },
   { atlas = 1, id = 509, name = "wall_stone_6_bottom" },
   { atlas = 1, id = 510, name = "wall_stone_7_bottom" },
   { atlas = 1, id = 511, name = "wall_stone_8_bottom" },
   { atlas = 1, id = 512, name = "wall_stone_9_bottom" },
   { atlas = 1, id = 513, name = "wall_stone_10_bottom" },
   { atlas = 1, id = 514, name = "wall_hay_bottom" },
   { atlas = 1, id = 515, name = "wall_decor_bottom" },
   { atlas = 1, id = 516, name = "wall_palace_1_bottom" },
   { atlas = 1, id = 517, name = "wall_palace_2_bottom" },
   { atlas = 1, id = 518, name = "wall_palace_3_bottom" },
   { atlas = 1, id = 519, name = "wall_stone_11_bottom" },
   { atlas = 1, id = 520, name = "wall_cyber_bottom" },
   { atlas = 1, id = 521, name = "wall_stone_12_bottom" },
   { atlas = 1, id = 522, name = "wall_white_bottom" },
   { atlas = 1, id = 523, name = "wall_decor_2_bottom" },
   { atlas = 1, id = 524, name = "wall_concrete_2_bottom" },
   { atlas = 1, id = 525, name = "wall_concrete_3_bottom" },
   { atlas = 1, id = 526, name = "wall_concrete_dark_1_bottom" },
   { atlas = 1, id = 527, name = "wall_concrete_dark_2_bottom" },
   { atlas = 1, id = 543, name = "stable_top" },
   { atlas = 1, id = 550, name = "palace_fountain", count_x = 2 },
   { atlas = 1, id = 564, name = "light_grass_carts" },
   { atlas = 1, id = 565, name = "light_grass_carts_gold" },
   { atlas = 1, id = 566, name = "light_grass_carts_jewels" },
   { atlas = 1, id = 567, name = "light_grass_carts_rocks" },
   { atlas = 1, id = 568, name = "light_grass_rocks" },
   { atlas = 1, id = 572, name = "light_grass_fencing_ns" },
   { atlas = 1, id = 573, name = "light_grass_fencing_we" },
   { atlas = 1, id = 574, name = "grass_fencing_ns" },
   { atlas = 1, id = 575, name = "grass_fencing_we" },
   { atlas = 1, id = 576, name = "stable_bottom" },
   { atlas = 1, id = 577, name = "horse" },
   { atlas = 1, id = 594, name = "water", count_x = 3 },
   { atlas = 1, id = 627, name = "light_grass_box" },
   { atlas = 1, id = 628, name = "water_wall_edge" },
   { atlas = 1, id = 629, name = "cobble_diagonal_fish" },
   { atlas = 1, id = 630, name = "cobble_diagonal_posts" },
   { atlas = 1, id = 631, name = "crates_open" },
   { atlas = 1, id = 632, name = "crates" },
   { atlas = 1, id = 633, name = "wharf_crates_1" },
   { atlas = 1, id = 634, name = "wharf_crates_2" },
   { atlas = 1, id = 635, name = "cobble_diagonal_net" },
   { atlas = 1, id = 636, name = "cobble_statue" },
   { atlas = 1, id = 637, name = "water_wall_edge_grass" },
   { atlas = 1, id = 638, name = "cobble_pillar" },
   { atlas = 1, id = 639, name = "carpet_3_fish_boards" },
   { atlas = 1, id = 641, name = "cobble_fence" },
   { atlas = 1, id = 646, name = "sign_magic" },
   { atlas = 1, id = 647, name = "sign_inn" },
   { atlas = 1, id = 648, name = "sign_equip" },
   { atlas = 1, id = 651, name = "sign_blacksmith" },
   { atlas = 1, id = 652, name = "sign_general_vendor" },
   { atlas = 1, id = 654, name = "sign_shield" },
   { atlas = 1, id = 655, name = "sign_potion" },
   { atlas = 1, id = 656, name = "sign_lamp" },
   { atlas = 1, id = 657, name = "sign_bakery" },
   { atlas = 1, id = 658, name = "sign_pub" },
   { atlas = 1, id = 659, name = "sign_casino" },
   { atlas = 1, id = 662, name = "stacked_wood" },
   { atlas = 1, id = 663, name = "stacked_sacks" },
   { atlas = 1, id = 664, name = "stacked_crates_green" },
   { atlas = 1, id = 665, name = "stacked_crates" },
   { atlas = 1, id = 666, name = "snow_large_mound" },
   { atlas = 1, id = 667, name = "cobble_raised_4" },
   { atlas = 1, id = 668, name = "snow_log" },
   { atlas = 1, id = 669, name = "ice_wall_edge" },
   { atlas = 1, id = 690, name = "boat_left" },
   { atlas = 1, id = 691, name = "boat_right" },
   { atlas = 2, id = 22,  name = "onii_1" },
   { atlas = 2, id = 23,  name = "onii_2" },
   { atlas = 2, id = 24,  name = "onii_3" },
   { atlas = 2, id = 26,  name = "onii_4" },
   { atlas = 2, id = 27,  name = "onii_5" },
   { atlas = 2, id = 28,  name = "onii_6" },
   { atlas = 2, id = 29,  name = "onii_7" },
   { atlas = 2, id = 30,  name = "onii_8" },
   { atlas = 2, id = 31,  name = "onii_9" },
   { atlas = 2, id = 34,  name = "snow_cracks_atlas2" },
   { atlas = 2, id = 36,  name = "snow_grass_atlas2" },
   { atlas = 2, id = 44,  name = "snow_pillar_atlas2" },
   { atlas = 2, id = 51,  name = "snow_plants_atlas2" },
   { atlas = 2, id = 53,  name = "onii_10" },
   { atlas = 2, id = 54,  name = "onii_11" },
   { atlas = 2, id = 55,  name = "onii_12" },
   { atlas = 2, id = 56,  name = "onii_13" },
   { atlas = 2, id = 57,  name = "onii_14" },
   { atlas = 2, id = 58,  name = "onii_15" },
   { atlas = 2, id = 60,  name = "onii_16" },
   { atlas = 2, id = 61,  name = "onii_17" },
   { atlas = 2, id = 62,  name = "onii_18" },
   { atlas = 2, id = 63,  name = "onii_19" },
   { atlas = 2, id = 64,  name = "onii_20" },
   { atlas = 2, id = 65,  name = "onii_21" },
   { atlas = 2, id = 86,  name = "onii_22" },
   { atlas = 2, id = 87,  name = "onii_23" },
   { atlas = 2, id = 88,  name = "onii_24" },
   { atlas = 2, id = 89,  name = "onii_25" },
   { atlas = 2, id = 90,  name = "onii_26" },
   { atlas = 2, id = 91,  name = "onii_27" },
   { atlas = 2, id = 92,  name = "onii_28" },
   { atlas = 2, id = 93,  name = "onii_29" },
   { atlas = 2, id = 94,  name = "onii_30" },
   { atlas = 2, id = 95,  name = "onii_31" },
   { atlas = 2, id = 96,  name = "onii_32" },
   { atlas = 2, id = 97,  name = "onii_33" },
   { atlas = 2, id = 98,  name = "onii_34" },
   { atlas = 2, id = 119, name = "onii_35" },
   { atlas = 2, id = 120, name = "onii_36" },
   { atlas = 2, id = 121, name = "onii_37" },
   { atlas = 2, id = 122, name = "onii_38" },
   { atlas = 2, id = 123, name = "onii_39" },
   { atlas = 2, id = 124, name = "onii_40" },
   { atlas = 2, id = 125, name = "onii_41" },
   { atlas = 2, id = 126, name = "onii_42" },
   { atlas = 2, id = 127, name = "onii_43" },
   { atlas = 2, id = 128, name = "onii_44" },
   { atlas = 2, id = 129, name = "onii_45" },
   { atlas = 2, id = 130, name = "onii_46" },
   { atlas = 2, id = 131, name = "onii_47" },
   { atlas = 2, id = 152, name = "onii_48" },
   { atlas = 2, id = 153, name = "onii_49" },
   { atlas = 2, id = 154, name = "onii_50" },
   { atlas = 2, id = 155, name = "onii_51" },
   { atlas = 2, id = 156, name = "onii_52" },
   { atlas = 2, id = 157, name = "onii_53" },
   { atlas = 2, id = 159, name = "onii_54" },
   { atlas = 2, id = 160, name = "onii_55" },
   { atlas = 2, id = 161, name = "onii_56" },
   { atlas = 2, id = 162, name = "onii_57" },
   { atlas = 2, id = 163, name = "onii_58" },
   { atlas = 2, id = 164, name = "onii_59" },
   { atlas = 2, id = 185, name = "onii_60" },
   { atlas = 2, id = 186, name = "onii_61" },
   { atlas = 2, id = 187, name = "onii_62" },
   { atlas = 2, id = 188, name = "onii_63" },
   { atlas = 2, id = 189, name = "onii_64" },
   { atlas = 2, id = 190, name = "onii_65" },
   { atlas = 2, id = 192, name = "onii_66" },
   { atlas = 2, id = 193, name = "onii_67" },
   { atlas = 2, id = 194, name = "onii_68" },
   { atlas = 2, id = 195, name = "onii_69" },
   { atlas = 2, id = 196, name = "onii_70" },
   { atlas = 2, id = 218, name = "onii_71" },
   { atlas = 2, id = 219, name = "onii_72" },
   { atlas = 2, id = 220, name = "onii_73" },
   { atlas = 2, id = 221, name = "onii_74" },
   { atlas = 2, id = 222, name = "onii_75" },
   { atlas = 2, id = 223, name = "onii_76" },
   { atlas = 2, id = 252, name = "onii_77" },
   { atlas = 2, id = 253, name = "onii_78" },
   { atlas = 2, id = 254, name = "onii_79" },
   { atlas = 2, id = 255, name = "onii_80" },
   { atlas = 2, id = 256, name = "onii_81" },
   { atlas = 2, id = 285, name = "onii_82" },
   { atlas = 2, id = 286, name = "onii_83" },
   { atlas = 2, id = 287, name = "onii_84" },
   { atlas = 2, id = 288, name = "onii_85" },
   { atlas = 2, id = 289, name = "onii_86" },
   { atlas = 2, id = 317, name = "onii_87" },
   { atlas = 2, id = 318, name = "onii_88" },
   { atlas = 2, id = 319, name = "onii_89" },
   { atlas = 2, id = 320, name = "onii_90" },
   { atlas = 2, id = 321, name = "onii_91" },
   { atlas = 2, id = 322, name = "onii_92" },
   { atlas = 2, id = 350, name = "onii_93" },
   { atlas = 2, id = 351, name = "onii_94" },
   { atlas = 2, id = 352, name = "onii_95" },
   { atlas = 2, id = 353, name = "onii_96" },
   { atlas = 2, id = 354, name = "onii_97" },
   { atlas = 2, id = 355, name = "onii_98" },
   { atlas = 2, id = 356, name = "onii_99" },
   { atlas = 2, id = 357, name = "onii_100" },
   { atlas = 2, id = 358, name = "onii_101" },
   { atlas = 2, id = 359, name = "onii_102" }
}

local function gen_map_tiles(tiles)
   local l = {}
   for _, v in ipairs(tiles) do
      local frames = v.count_x or 1

      for f=1,frames do
         local id = v.id + f - 1
         local x = (id % 33) * 48
         local y = math.floor(id / 33) * 48

         local source = string.format("graphic/map%d.bmp", v.atlas)
         local output = string.format("graphic/%s/%d_%d.png", "map_tile", v.atlas, id)

         l[#l+1] = {
            type = "crop",
            source = source,
            x = x,
            y = y,
            width = 48,
            height = 48,
            output = output,
            no_alpha = true,
         }
      end
   end
   return l
end

map_tile = gen_map_tiles(map_tile)

return {
   map_tile = map_tile
}
